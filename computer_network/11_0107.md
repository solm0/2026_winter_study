# Ethernet
유선 LAN에서 많이쓰임.
- 하나의 칩으로 여러 속도를 지원한다
- 물질도 여러개
- 단순,쌈

특징
- unreliable: receiver NIC은 ack하지 않음. sender가 tcp같은거 안쓰면 frame 버려져도 재전송안함.
- connectionless: handshaking 없음
- MAC 프로토콜은 unslotted CSMA/CD with binary backoff

## Ethernet frame 구조
sender의 adapter가 ip datagram을 Ethernet frame으로 encapsulate함.

`preamble   dest.addr   src.addr    type    data    CRC`

preamble
- frame의 시작 알림(receiver를 sender clock rate와 동기화하기위해)??
- 10101010 7byte 후 10101011 1byte

addresses
- 각각 6 byte
- adapter가 자기랑 도착지주소가 맞는 frame을 받으면 network layer로. 아니면 버림. ?

type: 상위레벨 프로토콜 종류(주로 ip)
CRC: receiver에서 체크위한. 에러생기면 버림

## physical topology(구조)
bus
- 90년대 많이씀.
- 모든 노드가 하나의 collision domain에.(그럼 100%충돌아님/..?)

star
- 요즘. 중심에서 스위치로 묶임.
- 각 link마다 프로토콜사용되지만 충돌없음, 양방향. 각 link가 각자의 collision domain임.
- - host들은 스위치에 직접,자기만을위해 연결돼있음.

### Ethernet switch
- active role
  - 여러 동시전송 중개역할(switching)
  - 패킷을 buffer함.
- transparent: host들은 스위치 존재 모름.
- plug-and-play, self-learning: 스위치는 configure될 필요 없음.

self learning
- 스위치는 어떤 Host에 어떤 인터페이스(스위치의 아웃풋링크?) 통해 도달할 수있는지 learn.
- frame이 전달되면 스위치가 sender의 location(인터페이스?)를 learn함. 어떻게??
- sender/location 쌍을 switch table에 기록함.

도착지 아는데 location 모르면 flood(broadcast)함
-> 알게되면 table에 넣고 그 링크로 selectively forward?
망에 들어가면 자동으로 자기 mac주소를 broadcast함.?

스위치가 들어간 네트워크 구조 슬라이드 13p에.



# 라우터 vs 스위치
둘다 store-and-forward함.
둘다 forwarding table 가짐.

라우터: 3계층까지. network layer 헤더 다룸. 라우팅알고리즘이랑 ip주소 사용
스위치: 2계층까지. link layer 헤더 다룸. flooding,learning,MAC주소 사용







# VLANS (Virtual local area network)
- 스위치의 port를 static하게 고정하면? (1-3번은 소융대 4-6은 공대...) -> 비효율적. 남아도 못씀.
- 한 스위치에 연결됐던 유저가 다른스위치 쓰는 사무실로 갔는데 이전사무실 스위치에 연결하고싶으면?
  - 모든 layer-2 broadcast traffic(ARP,DHCP,location모르는 MAC주소) 전체 LAN을 건너가야 함 -> 효율,보안 이슈

virtual하게 유연하게 사용할수있게하자. 

스위치가 하나의 physical LAN 인프라갖고도 여러개의 virtual LAN을 가질 수 있게 configure함.

## port-based VLAN
스위치의 port를 그룹 지어서
하나의 물리적 스위치가 여러개의 virtual 스위치로 작동하게 하기

- traffic 분리: 1-8포트로가는 frame은 1-8포트에만 갈수있게. VLAN을 스위치 포트보다는 MAC주소로 정의할수있음?
- 동적 할당: 포트들은 VLAN안에서 동적으로 할당됨.
- VLAN사이 forwarding: 라우팅으로 어쩌고저쩌고

나중에 한번더 보기...








# 데이터센터 네트워크
문제
- 서빙해야하는 클라이언트겁나많은 어플리케이션들 겁나많음
- 부하 관리, 병목 피하기

load balancer: application layer 라우팅
- 클라이언트 요청받음 -> 데이터센터로보냄 -> 결과 클라이언트한테 보냄(datacenter internal라우터?를 숨김)

스위치,rack들 간 연결많음 mesh
-> rack들 사이 throughput증가.
-> 분산되니까 reliability증가. 병목감소. 근데 복잡도올라감.

server rack들 어디로 가야하는지 라우팅하기 위해서 스위치들이 위계화되어있음.
- Tier-1 스위치
- Tier-2 스위치
- TOR 스위치
- Server racks


a day in the life 23p





# 무선
무선은 유선과 달리 움직임에 제한이 없다.
이동하는 중에도 seamless한 서비스 필요

와이파이, cellular, nfc, bluetooth

## 구성요소
- wireless hosts
- base station
  - cell tower기지국, access point(AP)
  - 보통 유선네트워크에 연결됨.
- wireless link
- infrastructure mode
  - 최대범위: cell.
  - hand off: mobile host가 base station바꿈.
  - hand on: 새로운 base station과의 연결
- ad hoc mode
  - no base station
  - 노드는 링크가 허용하는 한 다른 노드에게만 보낼수있음.
  - 그때그때 모이는 애들끼리 형성되는 네트워크 망.

## 분류
infrastructure(base station)
- single hop: host가 base station에 연결(WiFi,cellular)
- multiple hops: host가 인터넷에연결되기위해 몇개의 무선 노드를 거쳐야함(mesh net)

no-infra
- single hop: 인터넷에 연결없음. (블루투스, ad hoc)
- multiple hops: (차간통신? 가로등?)







## 무선의 유선과 다른점
어려움
- decreased signal strength: signal의 세기는 멀리 갈수록 약해진다.
- interference from other source: 다른 소스에서의 신호가 생기면 간섭.
- multipath propagation: 공간에따라 전파시간다른?
- SNR

SNR: singal-to-noise ratio
노이즈 대비 시그널의 비율. 높다는거는 시그널이 세다는거.

SNR vs BER(bit error rate) tradeoffs
- physical layer 같을때: 세게보냄 -> SNR증가 -> BER감소
- SNR 같을때: BER 조건에 맞는 physical layer 선택해야.뭔소리?

SNR은 이동하면서 바뀔수있음. 동적으로 physical layer에 적응해야 함.

SNR세기를 높이면 더 많은 정보를 담을 수 있겠지, 근데 너무 많은 signal이 동시에 그러면 안되니까 adaptive하게 strength를 조절해야.

## 무선의 특징
- hidden terminal problem: 중간에 장애물이 있으면 전파가 안됨.
- signal attenuation: 두 signal의 상쇄.





# CDMA (Code Division Multiple Access)
유저마다 고유한 code(chipping sequence)를 할당해줌.
모든 유저는 같은 주파수가짐. 여러 유저가 공존하면서 충돌 최소로 동시에 전송할 수 있게 해줌.
code가지고 signal을 인코딩함.

인코딩 디코딩이 필요함. 코드에 시그널 담아 합치는 과정이 인코딩. 받는 쪽에서는 디코딩 필요.

code는 8개의 값으로(1, -1) -> 8개로 쪼개서 곱함 -> 합쳐서 신호 감 -> chipping은 ㅂ낼대 받을때 똑같은 -> 똑같은거 ㄱ지고 받는측에서 계산(곱해서 더하고 8로 나눔)