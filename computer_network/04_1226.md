# P2P 구조
cs의단점
- 서버: 서버에 몰림
- 클라이언트: 내정보가 한 서버에 다 들어있어서 중앙서버에 허점이 있으면 전부 유출됨

중앙서버에 모아놓지 말고 가지고 있는 노드에게서 받자.
데이터 권한이 서버에 가있는게 불편하고 보안 강화 위해 비트코인
보안은 분산이다

- cs구조에서는 클라이언트 숫자가 많아질수록 소요시간이 많아진다.
- P2P에서는 많아질수록 서버의 오버로드가 분산

## BitTorrent
파일 공유. 256kb의 청크 단위로 쪼개서 서로 주고받음. 나중에 받아서 assemble. 내 주변 peer들 중 가장 빠르게 줄 수 있는 곳으로부터 받음.

peer joining: 나갔다 들어왔다가 자유롭다.

tit for tat: 기여한 만큼 받는다. 파일공유 많이할수록 파일 속도나 갯수 높이는 정책

- top 4: 가장 파일을 잘 줄 수 있는 peer를 정해둠.

## Video streaming과 CDN: context
video on demand

영상을 쪼개면 프레임, 프레임을 쪼개면 픽셀
긴 데이터는 깨질 확률이 큼. loss없이 seamless하게 매끄럽게 보내기가 어려움. 3G일때는어려웠음

클라이언트가 성격이 바뀌어서 지속적으로 보지 않고 배속하고 뒤로가고 이럼
계단식으로 꾸준하게가 안됨 -> 버퍼링

## playout buffering
지금 속도가 좋다면 나중에 안될때를 생각해서 미리 받아둠.

## DASH(Dynamic Adaptiva Streaming over HTTP)
환경에 맞는 정보를 줘서 환경에 맞는 서비스를 주게 함.
현시점에서 어느 서버에서 받아오는게 좋은지 체크
서버를 바꾸면서 받아옴? 서버 속도가 느려지면 내 속도를 낮춤
-> 클라이언트에게 intelligence를.






# Socket Programming
applcation과 transport 사이에 걸쳐져있음.
한 노드의 process가 다른 노드의 process와 소통할때.

두 소켓 타입 TCP, UDP
UDP는 클라이언트/서버 간 connection 없고 순서가 없음.
datagram이면 UDP, stream이면 TCP? 과제는 HTTP 2.0, TCP 씀

테스트만 주고받다가 protocol을 얹어서 파싱하는걸추가한다?
그럼 protocol이 없어도 주고받는건 되는거야?

그러니까 과제에서해야할것은파이썬으로 클라이언트 process랑 서버 process를만들어서(근데 내컴퓨터랑 vps는 클라이언트가 될수도 서버가 될수도 있는것? 둘다 ip를 갖고잇는것? ip는 장치가 갖고있는것인가? 무선랜이 갖고있는것인가?) 소켓 즉 문을 만들어줘서 일단 텍스트를 주고받아본다음 TCP프로토콜이랑 HTTP프로토콜 얹기? 클라이언트앱은 웹으로만들어줄수있나? 웹에서 녹음받아서 파일 보내서
TCP congestion control은 python TCP 라이브러리에서 해주는건가? 아니면 직접 구현해야하는건가?

## socket with UDP

## socket with TCP

유사, TCP는 SOCK_STREAM을 쓰고 UDP는 SOCK_DGRAM을쓰는등 조금씩 다름.
listen: 동시접속 숫자

# Transport layer protocols
transport layer에서느 port 넘버를. 왜냐면 process간의 소통이니까. entwork는 host간의.

TCP든 UDP든 소켓을 쓴다.
multiplexing: 보내는 쪽에서 소켓 하나에 여러 데이터를 보냄
demultiplexing: 받는쪽에서.
인코딩 디코딩처럼..

UDP에서는 source port, destination port 넘버를 맨위에 갖고이씅ㅁ.
segment format.

## Connectionless Demultiplexing
tcp는 connection base -> 보낼 때 connection하나를 열고, 연상태롤 주고받고, 완료되면 끈다 -> connection이만들어진다 = 소켓을 하나 만든다. 소켓을 열고 닫아야 해서 복잡함.

udp는 소켓 열고닫지 않고 열린 소켓1개에 보냄. connection을 열지 않는다

## Connection-oriented Demultiplexing
열때 서로 threehandshaking함, 끝날때 리소스 해제함
포트넘버만으로는 안됨. 받는쪽 ip/portnumber, 보내는쪽 ip/portnumber: 4-tuple
이름이다르기때문에 고유한포트를받을수있는것.

## UDP(User Datagram Protocol)
스트리밍 멀티미디어앱, DNS, SNMP(매니지먼트 프로토콜?) - 심플함.단순조회.

### Checksum
에러 체크
함수로 계산. 보낸 checksum과 받은 checksum 비교해 깨진거 확인